(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{152:function(t,e,s){"use strict";s.r(e);var i,a=s(1);function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(s,!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var c={inject:["generatePassword"],data:function(){return{tax_id:"",is_admin:!1,is_supervisor:!1,is_officer:!1,selected_status:1,statusList:[{text:"Pending",value:0},{text:"Approve",value:1},{text:"Un approve",value:2}]}},computed:n({},Object(a.d)("purchases/",["purchases"])),created:function(){this.tax_id=this.$store.state.rootUrl.split("/")[2],this.getPurchases(this.tax_id),"Admin"==this.$store.state.AppActiveUser.type&&(this.is_admin=!0),"Supervisor"==this.$store.state.AppActiveUser.type&&(this.is_supervisor=!0),"Officer"==this.$store.state.AppActiveUser.type&&(this.is_officer=!0)},methods:n({},Object(a.b)({getPurchases:"purchases/getPurchases",update:"purchases/updatePurchase",statusChange:"taxes/statusUpdateSPP",statusChangeManagment:"taxes/statusChangeManagment"}),(i={changeManagementStatus:function(t,e,s){var i={id:e,status:t,by:s,tax_id:this.tax_id,notify:this.$vs.notify,tax_type:"purchase"};this.statusChangeManagment(i).then((function(t){}))},updateCustomer:function(t){var e=this;this.$validator.validateAll("editform").then((function(s){if(s){e.$vs.loading();var i=new FormData(e.$refs.editForm);e.submit(i).then((function(s){"success"==s.data.status&&(e.password=e.email=e.first_name=e.last_name=e.zip_code=e.city=e.state=e.address=e.phone="",t.target.reset(),e.errors.clear(),e.editCustomerModal=!1,e.$vs.notify({title:"Success",text:"Customer Updated Successfully",color:"success",position:"top-right"}),e.$vs.loading.close()),"error"==s.data.status&&alert(s.data.msg)}))}}))},statusUpdate:function(t,e){var s=this,i={id:t,tax_id:this.tax_id,notify:this.$vs.notify,type:"purchase"};this.statusChange(i).then((function(i){var a=s.purchases.findIndex((function(e){return e.purchase_id==t}));"undefined"==i.data.response?s.purchases[a].officer_confirmed=e:s.purchases[a].officer_confirmed=i.data.response}))},addMoreFeild:function(){this.customField.push({name:"additional_field[]",value:"",type:"text"})},editCustomer:function(t){var e=this.findCustomer(t);this.customer_id=e.customer_id,this.name_english=e.name_english,this.name_khmer=e.name_khmer,this.industry=e.industry,this.tax_card_num=e.tax_card_num,this.tin_no=e.tin_no,this.email=e.email,this.telephone=e.telephone,this.additional_fields=e.additional_fields,this.address=e.address,this.district=e.district,this.group=e.group,this.incorporation_date=e.incorporation_date,this.muncipality=e.muncipality,this.province=e.province,this.sangkat=e.sangkat,this.street=e.street,this.village=e.village,self=this,self.customField=[],null!=e.additional_fields&&e.additional_fields.length>0&&e.additional_fields.map((function(t,e){self.customField.push({name:"additional_field[]",value:t,type:"text"})})),this.editCustomerModal=!0}},o(i,"updateCustomer",(function(t){var e=this;this.$validator.validateAll("editform").then((function(s){if(s){e.$vs.loading();var i=new FormData(e.$refs.editCustomerForm);e.update(i).then((function(s){"success"==s.data.status&&(t.target.reset(),e.errors.clear(),e.editCustomerModal=!1,e.$vs.notify({title:"Success",text:"Customer Updated Successfully",color:"success",position:"top-right"}),e.$vs.loading.close(),e.getCustomers())}))}}))})),o(i,"makePassword",(function(){this.password=this.generatePassword()})),i))},u=(s(81),s(2)),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vx-card",{attrs:{title:"List of Purchases"}},[s("vs-table",{attrs:{search:"",pagination:"","max-items":"6",data:t.purchases},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return t._l(i,(function(e,i){return s("vs-tr",{key:i},[s("vs-td",{attrs:{data:e.branch_name}},[t._v(t._s(e.branch_name))]),t._v(" "),s("vs-td",{attrs:{data:e.tax_period}},[t._v(t._s(e.tax_period))]),t._v(" "),s("vs-td",{attrs:{data:e.invoice_num}},[t._v(t._s(e.invoice_num))]),t._v(" "),s("vs-td",{attrs:{data:e.invoice_date}},[t._v(t._s(e.invoice_date))]),t._v(" "),s("vs-td",{attrs:{data:e.quantity}},[t._v(t._s(e.quantity))]),t._v(" "),s("vs-td",{directives:[{name:"show",rawName:"v-show",value:1==t.is_officer,expression:"is_officer == true"}],attrs:{data:e.officer_confirmed}},[s("vs-switch",{on:{click:function(s){return t.statusUpdate(e.purchase_id,e.officer_confirmed)}},model:{value:e.officer_confirmed,callback:function(s){t.$set(e,"officer_confirmed",s)},expression:"tr.officer_confirmed"}})],1),t._v(" "),s("vs-td",{directives:[{name:"show",rawName:"v-show",value:1==t.is_admin,expression:"is_admin == true"}],attrs:{data:e.management_confirmed}},[s("vs-select",{attrs:{width:"120px"},on:{input:function(s){return t.changeManagementStatus(e.management_confirmed,e.id,"admin")}},model:{value:e.management_confirmed,callback:function(s){t.$set(e,"management_confirmed",s)},expression:"tr.management_confirmed"}},t._l(t.statusList,(function(t,e){return s("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})})),1)],1),t._v(" "),s("vs-td",{directives:[{name:"show",rawName:"v-show",value:1==t.is_supervisor,expression:"is_supervisor == true"}],attrs:{data:e.supervisor_confirmed}},[s("vs-select",{attrs:{width:"120px"},on:{input:function(s){return t.changeManagementStatus(e.supervisor_confirmed,e.id,"supervisor")}},model:{value:e.supervisor_confirmed,callback:function(s){t.$set(e,"supervisor_confirmed",s)},expression:"tr.supervisor_confirmed"}},t._l(t.statusList,(function(t,e){return s("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})})),1)],1),t._v(" "),s("vs-td",[s("vs-button",{attrs:{to:"purchase-update/"+e.purchase_id,size:"small",type:"border","icon-pack":"feather",icon:"icon-edit"}}),t._v(" "),s("vs-button",{attrs:{to:"purchase-detail/"+e.purchase_id,size:"small","icon-pack":"feather",icon:"icon-maximize-2",type:"border"}})],1)],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",[t._v("Branch#/ Name")]),t._v(" "),s("vs-th",[t._v("Tax Period")]),t._v(" "),s("vs-th",[t._v("Invoice No.")]),t._v(" "),s("vs-th",[t._v("Invoice Date")]),t._v(" "),s("vs-th",[t._v("Quantity")]),t._v(" "),s("vs-th",[t._v("Status")]),t._v(" "),s("vs-th",[t._v("Actions")])],1)],2)],1)],1)}),[],!1,null,null,null);e.default=d.exports},30:function(t,e,s){var i=s(82);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s(5)(i,a);i.locals&&(t.exports=i.locals)},81:function(t,e,s){"use strict";var i=s(30);s.n(i).a},82:function(t,e,s){(t.exports=s(4)(!1)).push([t.i,".con-vs-popup .vs-popup {\n  width: 1000px !important;\n}\n",""])}}]);