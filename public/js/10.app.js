(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{127:function(e,t,s){"use strict";s.r(t);var a,r=s(1);function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(s,!0).forEach((function(t){n(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var d={inject:["generatePassword","loginUser"],data:function(){return{editCustomerModal:!1,customer_id:"",name_english:"",name_khmer:"",industry:"",tax_card_num:"",tin_no:"",email:"",telephone:"",address:"",street:"",village:"",muncipality:"",district:"",province:"",sangkat:"",group:"",incorporation_date:"",customField:[],tableEntries:10}},computed:o({},Object(r.d)("customers/",["customers"]),{},Object(r.c)("customers/",["findCustomer"])),created:function(){this.getCustomers()},methods:o({},Object(r.b)({getCustomers:"customers/getCustomers",update:"customers/updateCustomer"}),(a={updateCustomer:function(e){var t=this;this.$validator.validateAll("editform").then((function(s){if(s){t.$vs.loading();var a=new FormData(t.$refs.editCustomerForm);a.append("gender",t.gender),t.submit(a).then((function(s){"success"==s.data.status&&(t.password=t.email=t.first_name=t.last_name=t.zip_code=t.city=t.state=t.address=t.phone="",e.target.reset(),t.errors.clear(),t.editCustomerModal=!1,t.$vs.notify({title:"Success",text:"Customer Updated Successfully",color:"success",position:"top-right"}),t.$vs.loading.close()),"error"==s.data.status&&alert(s.data.msg)}))}}))},statusUpdate:function(e){var t=this;this.$vs.loading(),axios.post("status-update-customer",{id:e}).then((function(e){t.$vs.notify({title:"Updated!...",text:e.data.msg,color:"success",position:"top-right"}),t.$vs.loading.close()}))},addMoreFeild:function(){this.customField.push({name:"additional_field[]",value:"",type:"text"})},editCustomer:function(e){var t=this.findCustomer(e);this.customer_id=t.customer_id,this.name_english=t.name_english,this.name_khmer=t.name_khmer,this.industry=t.industry,this.tax_card_num=t.tax_card_num,this.tin_no=t.tin_no,this.email=t.email,this.telephone=t.telephone,this.additional_fields=t.additional_fields,this.address=t.address,this.district=t.district,this.group=t.group,this.incorporation_date=t.incorporation_date,this.muncipality=t.muncipality,this.province=t.province,this.sangkat=t.sangkat,this.street=t.street,this.village=t.village,self=this,self.customField=[],null!=t.additional_fields&&t.additional_fields.length>0&&t.additional_fields.map((function(e,t){self.customField.push({name:"additional_field[]",value:e,type:"text"})})),this.editCustomerModal=!0}},n(a,"updateCustomer",(function(e){var t=this;this.$validator.validateAll("editform").then((function(s){if(s){t.$vs.loading();var a=new FormData(t.$refs.editCustomerForm);t.update(a).then((function(s){"success"==s.data.status&&(e.target.reset(),t.errors.clear(),t.editCustomerModal=!1,t.$vs.notify({title:"Success",text:"Customer Updated Successfully",color:"success",position:"top-right"}),t.$vs.loading.close(),t.getCustomers())}))}}))})),n(a,"makePassword",(function(){this.password=this.generatePassword()})),a))},l=(s(62),s(2)),v=Object(l.a)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("vx-card",{attrs:{title:"List of Customers"}},[s("vs-table",{attrs:{search:"",pagination:"","max-items":e.tableEntries,data:e.customers},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return e._l(a,(function(t,a){return s("vs-tr",{key:a},[s("vs-td",{attrs:{data:t.name_english}},[e._v(e._s(t.name_english))]),e._v(" "),s("vs-td",{attrs:{data:t.name_khmer}},[e._v(e._s(t.name_khmer))]),e._v(" "),s("vs-td",{attrs:{data:t.industry}},[e._v(e._s(t.industry))]),e._v(" "),s("vs-td",{attrs:{data:t.id}},[e._v(e._s(t.tax_duration))]),e._v(" "),s("vs-td",{attrs:{data:t.tax_card_num}},[e._v(e._s(t.tax_card_num))]),e._v(" "),s("vs-td",{attrs:{data:t.tin_no}},[e._v(e._s(t.tin_no))]),e._v(" "),s("vs-td",{attrs:{data:t.email}},[e._v(e._s(t.email))]),e._v(" "),s("vs-td",{attrs:{data:t.telephone}},[e._v(e._s(t.telephone))]),e._v(" "),"Admin"!=e.$store.getters.userType?s("vs-td",{attrs:{data:0}},[e._v(e._s(0))]):e._e(),e._v(" "),"Admin"==e.$store.getters.userType?s("vs-td",{attrs:{data:t.status}},[s("vs-switch",{on:{click:function(s){return e.statusUpdate(t.customer_id)}},model:{value:t.status,callback:function(s){e.$set(t,"status",s)},expression:"tr.status"}})],1):e._e(),e._v(" "),s("vs-td",["Admin"==e.$store.getters.userType?s("vs-button",{attrs:{to:"customer-update/"+t.customer_id,size:"small",type:"border","icon-pack":"feather",icon:"icon-edit"}}):e._e(),e._v(" "),s("vs-button",{attrs:{to:"customer-detail/"+t.customer_id,size:"small","icon-pack":"feather",icon:"icon-maximize-2",type:"border"}})],1)],1)}))}}])},[s("template",{slot:"header"},[e._v("\n                Show\n                "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.tableEntries,expression:"tableEntries"}],staticClass:"vs-select--input",staticStyle:{width:"100px"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.tableEntries=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"10"},domProps:{innerHTML:e._s(10)}}),e._v(" "),s("option",{attrs:{value:"25"},domProps:{innerHTML:e._s(25)}}),e._v(" "),s("option",{attrs:{value:"50"},domProps:{innerHTML:e._s(50)}}),e._v(" "),s("option",{attrs:{value:"100"},domProps:{innerHTML:e._s(100)}})]),e._v("\n                Entries\n            ")]),e._v(" "),s("template",{slot:"thead"},[s("vs-th",[e._v("Name(English)")]),e._v(" "),s("vs-th",[e._v("Name(Khmer)")]),e._v(" "),s("vs-th",[e._v("Industy / Sector")]),e._v(" "),s("vs-th",[e._v("Tax Duration")]),e._v(" "),s("vs-th",[e._v("Tax ID")]),e._v(" "),s("vs-th",[e._v("TIN # ")]),e._v(" "),s("vs-th",[e._v("Email")]),e._v(" "),s("vs-th",[e._v("Tel")]),e._v(" "),"Admin"!=e.$store.getters.userType?s("vs-th",[e._v("Uncompleted Taxes")]):e._e(),e._v(" "),"Admin"==e.$store.getters.userType?s("vs-th",[e._v("Status")]):e._e(),e._v(" "),s("vs-th",[e._v("Actions")])],1)],2)],1),e._v(" "),s("vs-popup",{attrs:{active:e.editCustomerModal,title:"Update Customer"},on:{"update:active":function(t){e.editCustomerModal=t}}},[s("form",{ref:"editCustomerForm",attrs:{autocomplete:"off","data-vv-scope":"editform"},on:{submit:function(t){return t.preventDefault(),e.updateCustomer(t)}}},[s("vs-row",[s("vs-col",{attrs:{"vs-lg":"4","vs-md":"4","vs-sm":"12"}},[s("vx-input-group",{staticClass:"mt-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.customer_id,expression:"customer_id"}],attrs:{type:"hidden",name:"id","data-vv-scope":"editform"},domProps:{value:e.customer_id},on:{input:function(t){t.target.composing||(e.customer_id=t.target.value)}}}),e._v(" "),s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name_eng","label-placeholder":"Name (English)","data-vv-scope":"editform"},model:{value:e.name_english,callback:function(t){e.name_english=t},expression:"name_english"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.name_eng"),expression:"errors.has('editform.name_eng')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.name_eng")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"name_khmer","label-placeholder":"Name (Khmer)","data-vv-scope":"editform"},model:{value:e.name_khmer,callback:function(t){e.name_khmer=t},expression:"name_khmer"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.name_khmer"),expression:"errors.has('editform.name_khmer')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.name_khmer")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"email","label-placeholder":"Email","data-vv-scope":"editform"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.email"),expression:"errors.has('editform.email')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.email")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"telephone","label-placeholder":"Telephone","data-vv-scope":"editform"},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.telephone"),expression:"errors.has('editform.telephone')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.telephone")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"address","label-placeholder":"Address","data-vv-scope":"editform"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.address"),expression:"errors.has('editform.address')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.address")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"street","label-placeholder":"Street","data-vv-scope":"editform"},model:{value:e.street,callback:function(t){e.street=t},expression:"street"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.street"),expression:"errors.has('editform.street')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.street")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"tin_no","label-placeholder":"TIN No.","ata-vv-scope":"editform","data-vv-scope":"editform"},model:{value:e.tin_no,callback:function(t){e.tin_no=t},expression:"tin_no"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.tin_no"),expression:"errors.has('editform.tin_no')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.tin_no")))])],1)],1),e._v(" "),s("vs-col",{attrs:{"vs-lg":"4","vs-md":"4","vs-sm":"12"}},[s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"village","label-placeholder":"Village","data-vv-scope":"editform"},model:{value:e.village,callback:function(t){e.village=t},expression:"village"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.village"),expression:"errors.has('editform.village')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.village")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"muncipality","label-placeholder":"Muncipality","data-vv-scope":"editform"},model:{value:e.muncipality,callback:function(t){e.muncipality=t},expression:"muncipality"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.muncipality"),expression:"errors.has('editform.muncipality')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.muncipality")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"industry","label-placeholder":"Industry","data-vv-scope":"editform"},model:{value:e.industry,callback:function(t){e.industry=t},expression:"industry"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.industry"),expression:"errors.has('editform.industry')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.industry")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"district","label-placeholder":"District","ata-vv-scope":"editform","data-vv-scope":"editform"},model:{value:e.district,callback:function(t){e.district=t},expression:"district"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.district"),expression:"errors.has('editform.district')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.district")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"province","label-placeholder":"Province","ata-vv-scope":"editform","data-vv-scope":"editform"},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.province"),expression:"errors.has('editform.province')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.province")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"sangkat","label-placeholder":"Sangkat","ata-vv-scope":"editform","data-vv-scope":"editform"},model:{value:e.sangkat,callback:function(t){e.sangkat=t},expression:"sangkat"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.sangkat"),expression:"errors.has('editform.sangkat')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.sangkat")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"tax_id","label-placeholder":"Tax Id","ata-vv-scope":"editform","data-vv-scope":"editform"},model:{value:e.tax_card_num,callback:function(t){e.tax_card_num=t},expression:"tax_card_num"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.tax_id"),expression:"errors.has('editform.tax_id')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.tax_id")))])],1)],1),e._v(" "),s("vs-col",{attrs:{"vs-lg":"4","vs-md":"4","vs-sm":"12"}},[s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"group","label-placeholder":"Group","ata-vv-scope":"editform","data-vv-scope":"editform"},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.group"),expression:"errors.has('editform.group')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.group")))])],1),e._v(" "),s("vx-input-group",{staticClass:"mt-2"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"incorporation_date","label-placeholder":"Incorporation Date","ata-vv-scope":"editform","data-vv-scope":"editform"},model:{value:e.incorporation_date,callback:function(t){e.incorporation_date=t},expression:"incorporation_date"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("editform.incorporation_date"),expression:"errors.has('editform.incorporation_date')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("editform.incorporation_date")))])],1),e._v(" "),e._l(e.customField,(function(t,a){return s("div",{key:a,staticClass:"mb-2",attrs:{"vs-md":"12","vs-lg":"4","vs-sm":"12"}},[s("vx-input-group",[s("vs-input",{attrs:{type:t.text,name:t.name,"label-placeholder":"Custom Field "+(a+1)},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"field.value"}})],1)],1)}))],2),e._v(" "),s("vs-col",{attrs:{"vs-lg":"12","vs-md":"12","vs-sm":"12"}},[s("br"),e._v(" "),s("vs-button",{staticClass:"float-left",attrs:{type:"gradient",button:"button"},on:{click:function(t){return e.addMoreFeild()}}},[e._v("Add More Custom Fields")]),e._v(" "),s("vs-button",{staticClass:"float-right",attrs:{button:"submit",type:"gradient"}},[e._v("Update Customer")])],1)],1)],1)])],1)}),[],!1,null,null,null);t.default=v.exports},22:function(e,t,s){var a=s(63);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(5)(a,r);a.locals&&(e.exports=a.locals)},62:function(e,t,s){"use strict";var a=s(22);s.n(a).a},63:function(e,t,s){(e.exports=s(4)(!1)).push([e.i,".con-vs-popup .vs-popup {\n  width: 1000px !important;\n}\n",""])}}]);